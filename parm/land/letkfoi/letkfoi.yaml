geometry:
  fms initialization:
    namelist filename: !ENV ${DATA}/fv3jedi/fmsmpp.nml
    field table filename: !ENV ${DATA}/fv3jedi/field_table
  akbk: !ENV ${DATA}/fv3jedi/akbk.nc4
  layout:
  - !ENV ${layout_x}
  - !ENV ${layout_y}
  npx: $(npx_ges)
  npy: $(npy_ges)
  npz: $(npz_ges)
  field metadata override: !ENV ${DATA}/fv3jedi/gfs-land.yaml
  time invariant fields:
    state fields:
      datetime: '{{LAND_WINDOW_BEGIN}}'
      filetype: fms restart
      skip coupler file: true
      state variables: [orog_filt]
      datapath: !ENV ${FIXgfs}/fix_orog/${CASE}/
      filename_orog: !ENV ${CASE}_oro_data.nc

window begin: '{{LAND_WINDOW_BEGIN}}'
window length: $(LAND_WINDOW_LENGTH)

background:
   datetime: {{LAND_BKG_ISOTIME}}
   members from template:
     template:
       datetime: '{{LAND_BKG_ISOTIME}}'
       filetype: fms restart
       state variables: [snwdph,vtype,slmsk]
       datapath: !ENV ${DATA}/bkg/mem%mem%/RESTART
       filename_sfcd: '{{LAND_BKG_YYYYmmddHHMMSS}}.sfc_data.nc'
       filename_cplr: '{{LAND_BKG_YYYYmmddHHMMSS}}.coupler.res'
     pattern: '%mem%'
     nmembers: 2
     zero padding: 3

observations: !INC ${OBS_LIST}

driver:
  save posterior mean: false
  save posterior ensemble: false
  save posterior mean increment: true

local ensemble DA:
  solver: LETKF
  inflation:
    rtps: 0.0
    rtpp: 0.0
    mult: 1.0

output increment:
  filetype: fms restart
  filename_sfcd: xainc.sfc_data.nc

