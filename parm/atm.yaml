# Search path for model and obs for JCB
# -------------------------------------
app_path_model: gdas/model/atmosphere                   # Needs to be set to the clone path of jcb-gdas
app_path_observations: gdas/observations/atmosphere     # Needs to be set to the clone path of jcb-gdas
app_path_observation_chronicle: gdas/observation_chronicle/atmosphere     # Needs to be set to the clone path of jcb-gdas


# Places where we deviate from the generic file name of a yaml
# ------------------------------------------------------------
final_increment_file: final_increment_gaussian
output_ensemble_increments_file: output_ensemble_increments_gaussian
model_file: model_pseudo
initial_condition_file: background  # Initial conditions for 4D apps is background


# Assimilation window
# -------------------
window_begin: '{{ ATM_WINDOW_BEGIN | to_isotime }}'
window_length: '{{ ATM_WINDOW_LENGTH }}'
bound_to_include: begin

# Default background time is for 3D applications
atm_background_time_iso: "{{ current_cycle | to_isotime }}"


# Analysis standard things
# ------------------------
analysis_variables: [ua,va,t,ps,sphum,ice_wat,liq_wat,o3mr]
minimizer: DRPCG
final_diagnostics_departures: anlmob


# Model things
# ------------
# Geometry
layout_x: {{ layout_x }}
layout_y: {{ layout_y }}
npx_ges: {{ npx_ges }}
npy_ges: {{ npy_ges }}
npz_ges: {{ npz_ges }}
npx_anl: {{ npx_anl }}
npy_anl: {{ npy_anl }}
npz_anl: {{ npz_anl }}
fv3jedi_files_path: {{ DATA }}/fv3jedi

# Background
background_path: {{ DATA }}/bkg
background_ensemble_path: {{ DATA }}/ens/mem%mem%

# Background error
bump_data_directory: {{ DATA }}/berror
gsibec_path: {{ DATA }}/berror
number_ensemble_members: {{ NMEM_ENS }}
layout_gsib_x: {{ layout_gsib_x }}
layout_gsib_y: {{ layout_gsib_y }}

# Forecasting
forecast_length: {{ ATM_WINDOW_LENGTH }}
forecast_timestep: {{ BKG_TSTEP }}

# Write final increment on Guassian grid in variational
final_increment_prefix: "./anl/atminc."


# Observation things
# ------------------
observations:
- satwind_abi_goes-16
- scatwind_ascat_metop-b
- conv_ps
- gnssro
- ompsnp_npp
- ompstc_npp
- omi_aura

crtm_coefficient_path: {{ DATA }}/crtm/

# Naming conventions for observational files
atm_obsdatain_path: DATA/obs                        # {{DATA}}/obs/
atm_obsdatain_prefix: OPREFIX                       # {{OPREFIX}}
atm_obsdatain_suffix: ".2024020100.nc"              # ".{{ current_cycle | to_YMDH }}.nc"

atm_obsdataout_path: DATA/diags                     # {{DATA}}/diags/
atm_obsdataout_prefix: diag_
atm_obsdataout_suffix: "_2024020100.nc"             # "_{{ current_cycle | to_YMDH }}.nc"

# Naming conventions for bias correction files
atm_obsbiasin_path: DATA/obs                        # {{DATA}}/obs/
atm_obsbiasin_prefix: GPREFIX                       # {{GPREFIX}}
atm_obsbiasin_suffix: ".satbias.nc"
atm_obstlapsein_prefix: GPREFIX                     # {{GPREFIX}}
atm_obstlapsein_suffix: ".tlapse.txt"
atm_obsbiascovin_prefix: GPREFIX                    # {{GPREFIX}}
atm_obsbiascovin_suffix: ".satbias_cov.nc"

atm_obsbiasout_path: DATA/bc                        # {{DATA}}/bc/
atm_obsbiasout_prefix: APREFIX                      # {{APREFIX}}
atm_obsbiasout_suffix: ".satbias.nc"
atm_obsbiascovout_prefix: APREFIX                   # {{APREFIX}}
atm_obsbiascovout_suffix: ".satbias_cov.nc"
